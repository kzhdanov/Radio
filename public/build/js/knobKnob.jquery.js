!function(t){t.fn.knobKnob=function(n){var e=t.extend({snap:0,value:0,turn:function(){}},n||{}),o='<div class="knob">\t\t\t\t<div class="top"></div>\t\t\t\t<div class="base"></div>\t\t\t</div>';return this.each(function(){var n=t(this);n.append(o);var a=t(".knob",n),r=a.find(".top"),u=-1,s=0,i=0,f=0,v=t(document);e.value>0&&e.value<=359&&(i=f=s=e.value,r.css("transform","rotate("+s+"deg)"),e.turn(s/359)),a.on("mousedown touchstart",function(t){t.preventDefault();var n,o,c,d,h=a.offset(),m={y:h.top+a.height()/2,x:h.left+a.width()/2},l=180/Math.PI;a.on("mousemove.rem touchmove.rem",function(t){return t=t.originalEvent.touches?t.originalEvent.touches[0]:t,n=m.y-t.pageY,o=m.x-t.pageX,c=Math.atan2(n,o)*l,c<0&&(c=360+c),u==-1&&(u=c),d=Math.floor(c-u+i),d<0?d=360+d:d>359&&(d%=360),e.snap&&d<e.snap&&(d=0),!(Math.abs(d-f)>180)&&(s=d,f=d,r.css("transform","rotate("+s+"deg)"),void e.turn(s/360))}),v.on("mouseup.rem  touchend.rem",function(){a.off(".rem"),v.off(".rem"),i=s,u=-1})})})}}(jQuery);