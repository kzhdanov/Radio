function Build(){var a=this.data[0];$("#WeekNumber").val(a.WeekNumber);$("#BandName").val(a.BandName);$("#AlbumName").val(a.AlbumName);$("#Genres").val(a.Genres);$("#Year").val(a.Year);$("#preView").val(a.preView);$("#mainText").val(a.mainText);$("#ImgName").val(a.ImgName);if(a.IsVisible){$("#IsVisible").prop("checked",true)}else{$("#IsVisible").prop("checked",false)}$("#Save").attr("data-id",a.id)}function EditClick(a,b){a.preventDefault();$.ajax({method:"POST",async:true,data:{id:b},url:"/RadioAdmin/Edit",}).done(function(c){if(c.type==="success"){Build.call(c)}else{toastr.warning("Ошибка редактирования элемента");$("#Save").removeAttr("data-id")}}).fail(function(c){toastr.error("Oh, something went wrong...");$("#Save").removeAttr("data-id")})}function DeleteClick(b,c){b.preventDefault();var a=b;$.ajax({method:"POST",async:true,data:{id:c},url:"/RadioAdmin/Delete",}).done(function(d){if(d.type==="success"){a.target.parentNode.parentNode.remove();toastr.success("Элемент удален")}else{toastr.warning("Ошибка удаления элемента")}}).fail(function(d){toastr.error("Oh, something went wrong...")})}(function(){$("#Save").click(function(c){c.preventDefault();var b=$(this);if(!a($("#AddAlbumInfo"))){return false}b.hide();if(!$("#Save").attr("data-id")&&$("#Save").attr("data-id")!==""){$.ajax({method:"POST",async:true,data:{album:$("#AddAlbumInfo").serialize()},url:"/RadioAdmin/Save",}).done(function(e){b.show();if(e.type==="success"){toastr.success("Все успешно сохранилось")}else{toastr.error("Ошибка в процессе сохранения...")}}).fail(function(e){b.show();toastr.error("Oh, something went wrong...")})}else{var d=$("#AddAlbumInfo").serialize()+"&id="+$("#Save").attr("data-id");$.ajax({method:"POST",async:true,data:{album:d},url:"/RadioAdmin/EditSave",}).done(function(e){b.show();$("#Save").removeAttr("data-id");if(e.type==="success"){toastr.success("Изменения внесены успешно")}else{toastr.error("Ошибка в процессе сохранения редактирования...")}}).fail(function(e){b.show();$("#Save").removeAttr("data-id");toastr.error("Oh, something went wrong...")})}});$("#Search").click(function(c){c.preventDefault();var b=$(this);b.hide();$.ajax({method:"POST",async:true,data:{week:Number($("#WeekNumberSearch").val())},url:"/RadioAdmin/Get",}).done(function(d){b.show();$("table tbody").empty().html(d)}).fail(function(d){b.show();toastr.error("Oh, something went wrong...")})});function a(c){var d=true;var e=b(c);if(e.WeekNumber===""||e.WeekNumber===0||e.WeekNumber.length!==4){toastr.error("Номер недели должен состоять из 4-х цыфр...");d=false}if(e.BandName===""){toastr.error("Название группы должно быть заполнено...");d=false}if(e.AlbumName===""){toastr.error("Название альбома должно быть заполнено...");d=false}if(e.preView===""){toastr.warning("Превью должно быть заполнено...");d=false}if(e.mainText===""){toastr.warning("Список песен должно быть заполнено...");d=false}if(e.ImgName===""){toastr.warning("Имя картинки альбома должно быть заполнено или по умолчанию...");d=false}return d;function b(g){var h=g.serializeArray();var f={};$.map(h,function(k,j){f[k.name]=k.value});return f}}})();